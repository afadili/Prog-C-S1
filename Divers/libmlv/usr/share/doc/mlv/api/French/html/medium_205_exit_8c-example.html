<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
This file is part of the MLV Library.
Copyright (C) 2012 Adrien Boussicault, Marc Zipstein
This Library is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.
This Library is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.
You should have received a copy of the GNU General Public License
along with this Library.  If not, see <http://www.gnu.org/licenses/>.
-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MLV-2.0.2</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div class="header">
	<div class="headertitle">
		<h1>Documentation de la bibliothèque MLV-2.0.2</h1>
	</div>
</div>
<div class="tabs2">
	<ul class="tablist">
		<li><a href="index.html"><span>Presentation</span></a></li>
		<li><a href="download.html"><span>Téléchargement</span></a></li>
		<li><a href="installation.html"><span>Installation</span></a></li>
		<li><a href="compilation.html"><span>Compilation</span></a></li>
		<li><a href="examples.html"><span>Exemples</span></a></li>
		<li><a href="files.html"><span>API</span></a></li>
		<li><a href="globals_func.html"><span>Liste des fonctions</span></a></li>
		<li><a href="bug.html"><span>bogues</span></a></li>
        <li><a href="faq.html"><span>FAQ</span></a></li>
		<li><a href="contact_auteur.html"><span>contacts</span></a></li>
	</ul>
</div>
<!-- Généré par Doxygen 1.8.8 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">medium/05_exit.c</div>  </div>
</div><!--header-->
<div class="contents">
<p>Ce programme montre comment il est possible de faire arrêter proprement un programme lorsque l'utilisateur demande son arrêt en appuyant sur la croix de la fenêtre, ou en envoyant un signal sytème d'arret du programme.</p>
<div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="MLV__all_8h.html">MLV/MLV_all.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// exit_function est la fonction de call back qui sera appelée par la librairie</span></div>
<div class="line"><span class="comment">// MLV au moment où l&#39;utilisateur demandera à l&#39;application de s&#39;arrêter </span></div>
<div class="line"><span class="comment">// en utilisant un signal d&#39;arrêt ou en appuyant sur la croix de la </span></div>
<div class="line"><span class="comment">// fenêtre.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">void</span> exit_function( <span class="keywordtype">void</span>* data ){</div>
<div class="line">        <span class="keywordtype">int</span>* arret = (<span class="keywordtype">int</span>*)  data;</div>
<div class="line">        *arret = 1;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> affichage( <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height ){</div>
<div class="line">        <span class="keywordtype">int</span> elapsed_time;</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// On nettoie l&#39;écran</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a name="a0"></a><a class="code" href="MLV__window_8h_ad42bb589177324a3addb6e8e9f7e3be0.html#ad42bb589177324a3addb6e8e9f7e3be0">MLV_clear_window</a>( <a name="a1"></a><a class="code" href="MLV__color_8h_a29fe7690a40e2aece216152e9e593763.html#a29fe7690a40e2aece216152e9e593763">MLV_COLOR_BLACK</a> );</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Affichage du texte explicatif.</span></div>
<div class="line">        <span class="comment">//      </span></div>
<div class="line">        <a name="a2"></a><a class="code" href="MLV__text_8h_aee3fc4400ecf393501723aa5db89353b.html#aee3fc4400ecf393501723aa5db89353b">MLV_draw_adapted_text_box</a>(</div>
<div class="line">                10, 100,</div>
<div class="line">                <span class="stringliteral">&quot;Ce programme ne s&#39;arête pas.\nToutefois, vous pouvez fermer le programme en fermant simplement la fenêtre.\n A ce moment là il est possible,\n à l&#39;aide d&#39;une fonction de rappel,\n d&#39;exécuter un dernier code.&quot;</span>,</div>
<div class="line">                9,</div>
<div class="line">                <a name="a3"></a><a class="code" href="MLV__color_8h_a6f857e4e26ac1ad89d191514e53a6814.html#a6f857e4e26ac1ad89d191514e53a6814">MLV_COLOR_RED</a>, <a name="a4"></a><a class="code" href="MLV__color_8h_a15c3868b2cc0879653b2273278d4d9b6.html#a15c3868b2cc0879653b2273278d4d9b6">MLV_COLOR_GREEN</a>, <a class="code" href="MLV__color_8h_a29fe7690a40e2aece216152e9e593763.html#a29fe7690a40e2aece216152e9e593763">MLV_COLOR_BLACK</a>,</div>
<div class="line">                <a name="a5"></a><a class="code" href="MLV__text_8h_a7cba3ac75855cbcbf11d35a83e819377.html#a7cba3ac75855cbcbf11d35a83e819377a6af9c3dc7ea4f3339053f8e3446fafd6">MLV_TEXT_CENTER</a></div>
<div class="line">        );</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// On recupère le temps d&#39;execution depuis le debut du programme</span></div>
<div class="line">        <span class="comment">// </span></div>
<div class="line">        elapsed_time =  <a name="a6"></a><a class="code" href="MLV__time_8h_a26bba76fb74ff0fcbc5176ce3c7d7b69.html#a26bba76fb74ff0fcbc5176ce3c7d7b69">MLV_get_time</a>();</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// un message d&#39;impatiente à l&#39;écran</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a name="a7"></a><a class="code" href="MLV__text_8h_a549f2391ffb2c6c9bd4c8675a6a534f3.html#a549f2391ffb2c6c9bd4c8675a6a534f3">MLV_draw_text</a>(</div>
<div class="line">                10, 400, </div>
<div class="line">                <span class="stringliteral">&quot;Ca fait %d secondes que j&#39;attends que vous quittiez ce programme.&quot;</span>,</div>
<div class="line">                <a class="code" href="MLV__color_8h_a15c3868b2cc0879653b2273278d4d9b6.html#a15c3868b2cc0879653b2273278d4d9b6">MLV_COLOR_GREEN</a>, elapsed_time/1000</div>
<div class="line">        );</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Mise à jour de l&#39;affichage</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a name="a8"></a><a class="code" href="MLV__window_8h_a989a543c725ea5278334e5642c53c837.html#a989a543c725ea5278334e5642c53c837">MLV_actualise_window</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Attention ! </span></div>
<div class="line"><span class="comment">// Pour pouvoir compiler ce programme sous windows et sous macintosh,</span></div>
<div class="line"><span class="comment">// il faut, pour la déclaration du main, respecter strictement la syntaxe</span></div>
<div class="line"><span class="comment">// suivante :</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]){</div>
<div class="line">        <span class="keywordtype">int</span> arret = 0;</div>
<div class="line">        <span class="keywordtype">int</span> width = 640, height = 480;</div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// On enregistre la fonction de call back exit_function</span></div>
<div class="line">        <span class="comment">// dans la librairie MLV.</span></div>
<div class="line">        <span class="comment">// Cette ligne doit toujours précéder l&#39;appel de la fonction</span></div>
<div class="line">        <span class="comment">// MLV_create_window</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a name="a9"></a><a class="code" href="MLV__window_8h_ad329da83b22438005b1b067b3166ebe6.html#ad329da83b22438005b1b067b3166ebe6">MLV_execute_at_exit</a>( exit_function, &amp;arret );</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Créé la fenêtre et l&#39;affiche.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a name="a10"></a><a class="code" href="MLV__window_8h_a5f4ed8b1e1ac8ee176d08c3fc5dea1f1.html#a5f4ed8b1e1ac8ee176d08c3fc5dea1f1">MLV_create_window</a>( <span class="stringliteral">&quot;medium - 5 - exit&quot;</span>, <span class="stringliteral">&quot;exit&quot;</span>, width, height );</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Tant que l&#39;utilisateur ne demande pas un arret du programme,</span></div>
<div class="line">        <span class="comment">// on actualise l&#39;affichage de l&#39;écran.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordflow">while</span>( ! arret ){</div>
<div class="line">                affichage( width, height );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Affiche un message d&#39;adieu.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a class="code" href="MLV__text_8h_aee3fc4400ecf393501723aa5db89353b.html#aee3fc4400ecf393501723aa5db89353b">MLV_draw_adapted_text_box</a>(</div>
<div class="line">                200, 300,</div>
<div class="line">                <span class="stringliteral">&quot;Au revoir et à bientôt!&quot;</span>,</div>
<div class="line">                9,</div>
<div class="line">                <a class="code" href="MLV__color_8h_a6f857e4e26ac1ad89d191514e53a6814.html#a6f857e4e26ac1ad89d191514e53a6814">MLV_COLOR_RED</a>, <a class="code" href="MLV__color_8h_a15c3868b2cc0879653b2273278d4d9b6.html#a15c3868b2cc0879653b2273278d4d9b6">MLV_COLOR_GREEN</a>, <a class="code" href="MLV__color_8h_a29fe7690a40e2aece216152e9e593763.html#a29fe7690a40e2aece216152e9e593763">MLV_COLOR_BLACK</a>,</div>
<div class="line">                <a class="code" href="MLV__text_8h_a7cba3ac75855cbcbf11d35a83e819377.html#a7cba3ac75855cbcbf11d35a83e819377a6af9c3dc7ea4f3339053f8e3446fafd6">MLV_TEXT_CENTER</a></div>
<div class="line">        );</div>
<div class="line">        <a class="code" href="MLV__window_8h_a989a543c725ea5278334e5642c53c837.html#a989a543c725ea5278334e5642c53c837">MLV_actualise_window</a>();  <span class="comment">// Met à jour l&#39;affichage</span></div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Attend 2 secondes</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a name="a11"></a><a class="code" href="MLV__time_8h_ac628f6783be5d11bee510f4e06a2c2a7.html#ac628f6783be5d11bee510f4e06a2c2a7">MLV_wait_seconds</a>( 2 );</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Ferme la fenêtre</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a name="a12"></a><a class="code" href="MLV__window_8h_a139eec0093ed1ced7f49b0f35a5b65e5.html#a139eec0093ed1ced7f49b0f35a5b65e5">MLV_free_window</a>();</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> *   This file is part of the MLV Library.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *   Copyright (C) 2010,2011,2012,2013 Adrien Boussicault, Marc Zipstein</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *    This Library is free software: you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment"> *    it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><span class="comment"> *    the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><span class="comment"> *    (at your option) any later version.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *    This Library is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment"> *    but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment"> *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment"> *    GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> *    You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment"> *    along with this Library.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="comment"> */</span></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Généré le Vendredi 11 Septembre 2015 09:24:29 pour MLV-2.0.2 par &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
